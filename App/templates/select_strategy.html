{% extends 'layout.html' %}
{% block title %}Auto-Generate Schedule â€” Scheduloid{% endblock %}

{% block nav_actions %}
<a href="{{ url_for('index_views.admin_dashboard') }}" class="link">Back to Dashboard</a>
{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="card">
    <div class="card-header">
        <h1 class="card-title">Auto-Generate Schedule</h1>
        <p class="card-subtitle">Create a schedule with intelligent shift assignment</p>
    </div>
</section>

<div style="display: grid; grid-template-columns: 1fr 350px; gap: 1.5rem;">
    <!-- Main Form -->
    <section class="card">
        <div class="card-header">
            <h2 class="card-title">Schedule Configuration</h2>
        </div>
        <div class="card-body">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <ul class="flash-messages">
                  {% for category, message in messages %}
                    <li class="flash {{ category }}">{{ message }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            {% endwith %}
            
            <form method="POST">
                <div class="flex-col">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="schedule_name">Schedule Name</label>
                        <input type="text" id="schedule_name" name="schedule_name" placeholder="e.g., Week of Dec 1-7" required>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="week_start">Week Start Date & Time</label>
                            <input type="datetime-local" id="week_start" name="week_start" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="week_end">Week End Date & Time</label>
                            <input type="datetime-local" id="week_end" name="week_end" required>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="strategy">Scheduling Strategy</label>
                        <select id="strategy" name="strategy" required>
                            <option value="">Select a strategy...</option>
                            <option value="even">Even Distribution</option>
                            <option value="min_days">Minimize Days Worked</option>
                            <option value="balanced">Balanced Day/Night</option>
                        </select>
                    </div>
                    <div class="flex-row" style="margin-top: 0.5rem;">
                        <button type="submit" class="btn primary">Generate Schedule</button>
                        <a href="/admin/dashboard" class="btn">Cancel</a>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Info Panel -->
    <section class="card" style="height: fit-content;">
        <div class="card-header">
            <h2 class="card-title">Scheduling Strategies</h2>
        </div>
        <div class="card-body">
            <div class="notice-box" style="margin-bottom: 1rem;">
                <p style="margin: 0 0 0.25rem 0; color: #60a5fa; font-weight: 700;">Even Distribution</p>
                <p style="margin: 0; font-size: 0.85rem;">Distributes shifts evenly across all staff. Each member gets approximately the same number of shifts.</p>
            </div>
            <div class="notice-box" style="margin-bottom: 1rem;">
                <p style="margin: 0 0 0.25rem 0; color: #60a5fa; font-weight: 700;">Minimize Days Worked</p>
                <p style="margin: 0; font-size: 0.85rem;">Clusters shifts to fewer days per week. Staff work complete shifts on fewer days with longer hours.</p>
            </div>
            <div class="notice-box" style="margin-bottom: 0;">
                <p style="margin: 0 0 0.25rem 0; color: #60a5fa; font-weight: 700;">Balanced Day/Night</p>
                <p style="margin: 0; font-size: 0.85rem;">Balances day shifts (6am-6pm) and night shifts (6pm-6am) fairly among staff members.</p>
            </div>
        </div>
        <div class="card-header" style="border-top: 1px solid #334155;">
            <h2 class="card-title">How It Works</h2>
        </div>
        <div class="card-body">
            <ol style="margin: 0; padding-left: 1.25rem; color: #94a3b8; font-size: 0.9rem; line-height: 1.8;">
                <li>Enter a name for your schedule</li>
                <li>Select the start and end dates</li>
                <li>Choose a scheduling strategy</li>
                <li>Click "Generate Schedule"</li>
                <li>System auto-assigns shifts</li>
            </ol>
        </div>
    </section>
</div>
{% endblock %}
