{% extends "layout.html" %}
{% block title %}Staff Dashboard â€” Scheduloid{% endblock %}

{% block nav_actions %}
<span class="nav-identity">Logged in as Staff</span>
<a href="{{ url_for('index_views.logout') }}" class="link">Logout</a>
{% endblock %}

{% block content %}
<!-- Page Header Panel -->
<section class="card">
    <div class="card-header">
        <h1 class="card-title">Staff Dashboard</h1>
        <p class="card-subtitle">Welcome back! Manage your shifts and schedule</p>
    </div>
</section>

<div style="display: grid; grid-template-columns: 280px 1fr; gap: 1.5rem;">
    <!-- Quick Actions Panel -->
    <section class="card">
        <div class="card-header">
            <h2 class="card-title">Quick Actions</h2>
        </div>
        <div class="card-body">
            <div class="flex-col" style="gap: 0.5rem;">
                <button class="btn full-width" onclick="location.href='{{ url_for('index_views.staff_schedule') }}'">
                    View Schedule
                </button>
                <button class="btn full-width" onclick="location.href='{{ url_for('index_views.staff_shifts') }}'">
                    View Shifts
                </button>
                <button class="btn full-width" onclick="location.href='{{ url_for('index_views.staff_clock') }}'">
                    Clock In/Out
                </button>
                <button class="btn full-width" onclick="location.href='{{ url_for('index_views.request_swap') }}'">
                    Request Shift Swap
                </button>
                <button class="btn full-width" onclick="location.href='{{ url_for('staff_views.staff_swap_requests') }}'">
                    View Swap Requests
                </button>
                <button class="btn full-width" onclick="location.href='{{ url_for('staff_views.staff_profile') }}'">
                    My Profile
                </button>
            </div>
        </div>
    </section>

    <div class="flex-col">
        <!-- Today's Shift Panel -->
        <section class="card">
            <div class="card-header">
                <h2 class="card-title">Today's Shift Assignment</h2>
            </div>
            <div class="card-body">
                {% if today_shift %}
                <div class="flex-col" style="gap: 0;">
                    <div class="info-row">
                        <span class="info-label">Shift Date</span>
                        <span class="info-value">{{ today_shift.start_time.strftime('%Y-%m-%d (%A)') }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Time</span>
                        <span class="info-value">{{ today_shift.start_time.strftime('%H:%M') }} - {{ today_shift.end_time.strftime('%H:%M') }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Status</span>
                        <span class="info-value">
                            {% if today_shift.clock_out %}
                                <span style="color: #14b8a6;">Completed</span>
                            {% elif today_shift.clock_in %}
                                <span style="color: #3b82f6;">In Progress</span>
                            {% else %}
                                <span style="color: #f59e0b;">Not Started</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
                {% else %}
                <div style="background: #0f172a; border-radius: 6px; padding: 1.5rem; text-align: center;">
                    <p style="margin: 0; font-size: 1rem; color: #94a3b8;">No shift assigned for today.</p>
                    <p style="margin: 0.5rem 0 0 0; font-size: 0.85rem; color: #64748b;">Check back later or view your weekly schedule.</p>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Week Summary Panel -->
        <section class="card">
            <div class="card-header">
                <h2 class="card-title">This Week's Summary</h2>
            </div>
            <div class="card-body">
                <div class="flex-row">
                    <div class="stat-box">
                        <p class="stat-label">Shifts Assigned</p>
                        <p class="stat-value">{{ shifts_count }}</p>
                    </div>
                    <div class="stat-box teal">
                        <p class="stat-label">Total Hours</p>
                        <p class="stat-value">{{ total_hours }}</p>
                    </div>
                    <div class="stat-box amber">
                        <p class="stat-label">Status</p>
                        <p class="stat-value" style="font-size: 1.25rem; color: #14b8a6;">Active</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Important Notes Panel -->
        <section class="card">
            <div class="card-header">
                <h2 class="card-title">Important Notes</h2>
            </div>
            <div class="card-body">
                <ul class="notification-list">
                    <li>All your shifts are confirmed.</li>
                    <li>Please clock in/out on time each day.</li>
                    <li>Need to swap a shift? Use the "Request Shift Swap" button.</li>
                </ul>
            </div>
        </section>
    </div>
</div>
{% endblock %}
